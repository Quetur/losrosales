<header>
  <link rel="stylesheet" href="/css/productoventa.css">
</header>

<body>
  <form id="procesarventa" action="/procesar-venta" method="POST" style="font-size:24px">

    <div class="row">
      <div class="col-sm-5 col-md-6">
        <!--<div class="container mt-3 " style="width:300px;" align="left">-->

        <table border=1 align="center">
          <tr>
            <td style="width:200px;  align-items: center; text-align: center;">
              <input style="width:200px;height: 70px;font-size: 2rem;" type="text" name="search" id="search"
                class="form-control" placeholder="buscar" />
            </td>
            <td style="width:200px;  align-items: center; text-align: center;">
              <input style="width:200px; height: 70px;font-size: 2rem;" type="text" name="search2" id="search2"
                class="form-control" placeholder="codigo de barras" />
            </td>
            <td style="width:900px;  align-items: center; text-align: center;">
              {{#if comercio }}
              <input class="form-control" style="height: 70px;font-size: 2rem; background: #fa7373;  font-weight: bold;"
                type="text" name="tipodeventa" id="tipodeventa" class="form-control" value="Comercio" readonly></input>
              {{else if remito }}
              <input class="form-control" style="height: 70px;font-size: 2rem; background: yellow;  font-weight: bold;"
                type="text" name="tipodeventa" id="tipodeventa" class="form-control" value="REMITO" readonly></input>
              {{else}}
              <input class="form-control"
                style="height: 70px;font-size: 2rem; background: #83f783; font-family: Arial;font-weight: bold;"
                type="text" name="tipodeventa" id="tipodeventa" value="Particular" readonly></input>
              {{/if}}
            </td>
            <td style="width:110px;   align-items: right; text-align: right;">
              <input style="width:125px; height: 80px;  font-size: 2rem;background: #ca00b9"
                class="btn btn-success btn-lg btn-block" id="boton" value="Refresh" onclick=refresh()></input>
            </td>
          </tr>
        </table>

        <table>
          <tr style="background-color: blue;color: white; text-align: center;">
            <td>
              {{#if comercio }}
            <th style="width: 600px; text-align: left; ">Descripcion</th>
            <th style="width: 150px; ">Precio Nego</th>
            <th style="width: 150px; " hidden>Precio Nego Lista</th>
            <th style="width: 150px; ">Precio Part</th>
            <th style="width: 100px; ">Accion</th>
            {{else}}
            <th style="width: 730px;  text-align: left; ">Descripcion</th>
            <th style="width: 170px; ">Pcio Efec</th>
            <th style="width: 170px; " hidden>Pcio Lista</th>
            <th style="width: 100px; ">Accion</th>
            {{/if}}
            </td>
          </tr>
        </table>

        <div class="d-flex  justify-content-center">
          <div class="col-md-12 mx-auto">
            <div class="listaProductos" style="domLayout: autoHeight;min-height: 1000px !important; ">
              <!--table table-striped table-bordered table-hover header-fixed-->
              <table class="mi_table" id="tabla" style="domLayout: autoHeight; ">
                <!-- <thead>
                  <tr>
                    <th>Descripcion</th>
                    {{#if comercio }}
                    <th>Precio Nego</th>
                    <th>Precio Part</th>
                    {{else}}
                    <th>Precio Unitario</th>
                    {{/if}}

                    <th style="text-align:center;" colspan="4">Accion</th>
                  </tr>
                </thead>
                -->
                <tbody>
                  {{#if comercio }}
                  {{#each produ}}
                  <tr style="color:black;">
                    <td hidden>{{id_producto}}</td>
                    <td style="width: 90px;  border: none;">
                      <input style="font-size:1.1rem; border:none; color:black;" type="button"
                        value="{{fecha}}"></input>
                    </td>
                    <td style="width:500px;font-size:2rem; border: none;text-align:left;">{{des}}

                      <input style="font-size:1.5rem; border: none;color:red;text-align:right;" type="button"
                        pesa_{{id_producto}}" value="{{pesa}}"></input>
                    </td>


                    <td style="width: 150px;text-align:right;color:green" value="">$&nbsp&nbsp{{precio2}}</td>
                    <td style="width: 150px;text-align:right;" hidden>$&nbsp&nbsp{{precio2_debito}}</td>
                    <td style="width: 150px;text-align:right;">$&nbsp&nbsp{{precio1}}</td>
                    <td style="width: 100px;text-align:center; ">
                      <button style="width: 70px;background-color:green;color:white; text-align:center;"
                        class="sumacompra" type="button" id="{{id_producto}}" value="{{id_producto}}">+</button>



                      <input id="desc_{{id_producto}}" value="{{des}}" hidden=false> </input>

                      <input id="costo_{{id_producto}}" value="{{costo}}" hidden=false> </input>
                      <input id="precio2_{{id_producto}}" value="{{precio2}}" hidden=false> </input>
                      <input id="precio1_{{id_producto}}" value="{{precio1}}" hidden=false> </input>
                      <input id="precio2_debito_{{id_producto}}" value="{{precio2_debito}}" hidden=false> </input>
                      <input id="precio1_debito_{{id_producto}}" value="{{precio1_debito}}" hidden=false> </input>
                    <td style="width: 170px; text-align:right;font-size:1.5rem; color: rgb(255, 102, 0); border: none;"
                      value="{{cod_barra}}" hidden>
                      {{cod_barra}}</td>

                    </td>
                  </tr>
                  {{/each}}
                  {{else}}
                  {{#each produ}}
                  <tr style="color:black;">
                    <td hidden>{{id_producto}}</td>
                    <td style="width: 80px;  border: none;">
                      <input style="font-size:1.1rem; border:none;" type="button" value="{{fecha}}"></input>
                      <input style="font-size:1.1rem; border:none;" type="button" name="codigo_producto"
                        id="codigo_producto" value="{{id_producto}}" hidden></input>
                    </td>

                    <td style="width: 750px;">{{des}}</td>
                    <td style="width: 280px;">
                      <input style="font-size:1.1rem; border: none;" type="button" id="Descuentoapartir_{{id_producto}}"
                        value="{{descuentoapartir}}"></input>
                      <input style="font-size:1.1rem; border: none;" type="button" id="Descuentoxunidad_{{id_producto}}"
                        value="{{descuentoxunidad}}"></input>
                      <input style="font-size:1.5rem; border: none;color:red;" type="button"
                        id="tipoventa_{{id_producto}}" value="{{pesa}}"> </input>
                    </td>
                    <td style="width: 170px; text-align:right;font-size:1.5rem; color:green; border: none;">
                      $&nbsp&nbsp{{precio1}}
                    </td>
                    <td style="width: 170px; text-align:right;font-size:1.5rem; color: rgb(255, 102, 0); border: none;"
                      hidden>
                      $&nbsp&nbsp{{precio1_debito}}</td>
                    <td style="width: 170px; text-align:right;font-size:1.5rem; color: rgb(255, 102, 0); border: none;"
                      value="{{cod_barra}}" hidden>
                      {{cod_barra}}</td>
                    <td style="width: 100px;text-align:center; ">
                      <button style="width: 80px;background-color:green;color:white; " class="sumacompra" type="button"
                        id="{{id_producto}}" value="{{id_producto}}">+</button>
                    </td>
                    <input id="desc_{{id_producto}}" value="{{des}}" hidden=true> </input>

                    <input id="costo_{{id_producto}}" value="{{costo}}" hidden=true> </input>
                    <input id="precio1_{{id_producto}}" value="{{precio1}}" hidden=true> </input>
                    <input id="precio1_debito_{{id_producto}}" value="{{precio1_debito}}" hidden> </input>


                  </tr>
                  {{/each}}
                  {{/if}}
                </tbody>
              </table>
            </div>

          </div>
        </div>
      </div>
      <div class="form-group col-sm-5 col-md-6">
        <form>
          <table border="0" align="center" style="height: 70px;font-size: 2rem;">
            <tr style="color:black;">
              <td style="width:1px;  align-items: left; text-align: center;">
                <select id="combo_pedidos" name="combo_pedidos" hidden>

                  {{#each llegapedido}}
                  <option value="{{id}}" title="{{estado}}" data-saldo="{{estado}}">{{cliente}} {{fecha}} {{hora}}
                  </option>
                  {{/each}}
                </select>
                <select id="combo_pedidos2" name="combo_pedidos2" hidden>

                  {{#each preparapedido}}
                  <option value="{{id}}" title="{{estado}}" data-saldo="{{estado}}">{{cliente}} {{fecha}} {{hora}}
                  </option>
                  {{/each}}
                </select>
              </td>

              <td style="width: 100px; align-items: left; text-align: center; font-size: 1rem;">
                <div class="form-check">
                  <label for="Negocio">Negocio</label>
                  <input style="width: 30px;" type="radio" name="tipo1" id="tipo1" value="Negocio" checked></input>
                  <label for="Reparto">Reparto</label><br>
                  <input style="width: 30px;" type="radio" name="tipo1" id="tipo2" value="Reparto" required></input>
                </div>
              </td>
              <td style="height: 70px;font-size: 2rem;width: 200px;  text-align: left;">
                <label type="text">Cliente :</label>
                <input style="font-size: 2rem;width: 80px;  text-align: left;" name="id_cliente" id="id_cliente"
                  readonly hidden>
                <input style="font-size: 2rem;width: 80px;  text-align: left;" name="id_reparto" id="id_reparto"
                  readonly hidden>
              </td>
              <td style="width:200px;">
                <input type="text" name="cliente" id="cliente" class="form-control" placeholder="Nombre"
                  style="height: 70px;font-size: 2rem; text-align: left;" />


                <select id="combo_cliente" name="combo_cliente" onchange="myFunction(this)" hidden>
                  <option value=0>Seleccione un Cliente</option>
                  {{#each cli}}
                  <option value="{{id}}" title="{{nombre}}" data-saldo="{{saldo}}" ctacte="{{ctacte}}">{{nombre}}
                  </option>
                  {{/each}}
                </select>

                <select id="combo_reparto" name="combo_reparto" hidden onchange="funcion_reparto(this)">
                  <option value=0>Seleccione el pedido asociado</option>
                  {{#each reparto}}
                  <option value="{{id_reparto}}" title="{{nombre}}" data-saldo="{{saldo}}" ctacte="{{fecha_pedido}}">
                    {{nombre}}, {{fecha3}}
                  </option>
                  {{/each}}
                </select>

                <!-- Button trigger modal
                <center>
                  <button type="button" id="btnmodal" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"
                    data-cat="2" data-ape="">
                    Launch demo modal
                  </button>
                </center>
                Button trigger modal -->
              <td style="text-align:center; width:80px; height: 80px;">

                <input align="center" style="width:50px; height: 50px; align-items: center; font-size: 2rem;"
                  class="btn btn-info" id="btnmodal" value="+" data-toggle="modal" onclick=abremodal() hidden></input>
              </td>


              </td>
              <td style="height: 70px;font-size: 2rem;width: 60px;  text-align: left;">

                <label type="text">Saldo:</label>
              </td>
              <td style="height: 70px;font-size: 2rem;width: 100px;  text-align: left;">
                <input class="sinborde" style="font-size: 2rem;width: 100px;  text-align: right;" name="saldo_cliente"
                  id="saldo_cliente" readonly>
              </td>
              <td style="height: 70px;font-size: 2rem;width: 100px;  text-align: left;">
                <input class="sinborde" style="font-size: 2rem;width: 100px;  text-align: right;" name="cliente_ctacte"
                  id="cliente_ctacte" readonly>
              </td>


            </tr>
            <input type="text" name="combo_prov" id="combo_prov" value="{{user.fullname}}" class="form-control"
              style="height: 70px;font-size: 2rem; text-align: left;" hidden=true />

            <input style="width:200px; text-align:center;" name="fecha" id="fecha" hidden=true>

            <input style="width:200px; text-align:center;" name="horalocal" id="horalocal" align="center" hidden=true>
            <div style="color:red; " id="reloj" hidden=true></div>

          </table>

          <div class="d-flex  justify-content-center">
            <div class="col-md-12 mx-auto">
              <div class="listaProductos">
                <!--  id="lista_compra" -->
                <!-- table table-striped table-bordered table-hover -->
                <table border="0" id="lista_compra" class="table table-striped table-bordered table-hover"
                  name="lista_compra">
                  <thead>
                    <tr style="color:black;font-size:80%;">
                      <th hidden>Cod</th>
                      <th>Descripcion</th>
                      <th>Cant</th>
                      <th>Precio Efec</th>
                      <th> </th>
                      <th>Subttl Efec</th>
                      <th hidden>Subttl Lista</th>
                    </tr>
                  </thead>

                  <tbody id="prod_compra">
                    <span id="out"></span>
                  </tbody>
                  <tfoot>
                    <tr style="color: rgb(44, 10, 241);">
                      <th style="text-align: right" hidden> </th>
                      <th style="text-align: right" hidden> </th>
                      <th style="text-align: right"> Items :</th>
                      <th style="text-align: center" id="item_tabla"> </th>
                      <th style="text-align: right"> Total :</th>
                      <th style="text-align: right"> </th>

                      <th style="text-align:  right; color: green;" id="total_tabla" </th>
                      <th style="text-align:  right; color: rgb(255, 102, 0); hidden: true;" id="total_debito" hidden>
                      </th>
                    </tr>
                  </tfoot>
                </table>

              </div>
              <div>
                <table border=0 align="center">
                  <tr>
                    <td>
                      <label class="col-form-label h2">Items :</label>
                    </td>
                    <td>
                      <input style="width:100px;" class="btn btn-secondary btn-lg btn-block" name="largo" id="largo"
                        align="center">
                    </td>
                    <td style="width:100px;  align-items: right; text-align: right;">
                      <label class="col-form-label h2" style="width:300px;">Total Contado :</label>
                    </td>
                    <td style="width:100px;  align-items: right; text-align: right;">
                      <input style="width:100px; background-color: green;" align="center"
                        class="btn btn-primary btn-lg btn-block" id="total" name="total" class="total" value=""
                        type="text" readonly> </input>
                    </td>
                  </tr>

                  <tr>

                    <td style="width:100px;  align-items: right; text-align: right;">

                    </td>
                    <td style="width:100px;  align-items: center; text-align: center;">

                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td></td>
                    <td></td>
                    <td style="width:100px;  align-items: right; text-align: right;">Total Lista :&nbsp&nbsp</td>
                    <td style="width:100px;  align-items: right; text-align: right;">
                      <input style="width:100px; background-color: rgb(255, 102, 0);" align="center"
                        class="btn btn-primary btn-lg btn-block" id="total_lista" name="total_lista" class="total"
                        value="" type="text" readonly hidden></input>
                    </td>
                  </tr>
                  <tr>



                    <td style="width:100px;hight=100px;"></td>
                    <td></td>
                    <td style="width:100px;  align-items: right; text-align: right;">Paga con :&nbsp&nbsp</td>
                    <td style="width:100px;  align-items: right; text-align: right;">
                      <input style="width:100px;" align="center" class="btn btn-primary btn-lg btn-block" id="pago"
                        name="pago" class="total" value="" type="text" readonly></input>
                    </td>
                  </tr>
                  <tr>
                    <td colspan=2 style="width:200px;  align-items: center; text-align: center;">
                      <label>Forma de Pago</label><br>
                    </td>

                    <td style="width:100px;  align-items: right; text-align: right;">Su Vuelto :&nbsp&nbsp</td>
                    <td style="width:100px;  align-items: right; text-align: right;">
                      <input style="width:100px;" align="center" class="btn btn-primary btn-lg btn-block" id="vuelto"
                        name="vuelto" class="total" value="" type="text" readonly> </input>
                    </td>
                  </tr>
                  <tr style="width:100px;  ">

                    <td colspan=2 style="width:300px;  align-items: left; text-align: left;">
                      <label class="radio form-control " style="width: 400px;height: 250px; font-size: 2rem;">
                        <input style="width: 30px;" type="radio" name="condicion" id="condicion1" value="Efectivo"
                          required></input>
                        <label for="condicion1">Efectivo</label><br>
                        <input style="width: 30px;" type="radio" name="condicion" id="condicion2" value="Debito"
                          required hidden> </input>
                        <label for="condicion2">Debito o QR</label><br>
                        <input style="width: 30px;" type="radio" name="condicion" id="condicion3" value="Transferencia"
                          required></input>
                        <label for="condicion3">MercadoPago Transferencia</label><br>
                        <input style="width: 30px;" type="radio" name="condicion" id="condicion4"
                          value="CuentaCorriente" required></input>
                        <label for="condicion4">Cuenta Corriente</label><br>
                    </td>
                    <td style="width:150px;   align-items: right; text-align: right;">
                      <input name="efec" id="efec" onkeypress="return check(event)"
                        style="width:150px;   text-align: right; font-size: 2rem;" value="0"
                        class="btn btn-secondary btn-lg btn-block"></input>
                      <input name="debi" style="width:150px;   text-align: right;font-size: 2rem; " readonly value="0"
                        hidden>&nbsp &nbsp </input>
                      <input class="btn btn-secondary btn-lg btn-block" name="tran" id="tran"
                        style="width:150px;   text-align: right;  font-size: 2rem;" onkeypress="return check(event)"
                        value="0"></input>
                      <input name="" style="width:150px;   font-size: 2rem; text-align: right;" readonly value="0"
                        hidden>&nbsp &nbsp </input>
                      <input name="chk" id="chk" style="width:150px;   font-size: 2rem; text-align: right;" readonly
                        value="0"></input>
                    </td>

                    <td style="width:110px;   align-items: right; text-align: right;">
                      <input style="width:120px; height: 150px;  font-size: 2rem;"
                        class="btn btn-success btn-lg btn-block" id="boton" value="Grabar" onclick=validar()></input>
                    </td>
                  </tr>
                  <input name="caja" id="caja" hidden=true></input>

                  <!--
                <td style="width:300px;  align-items: right; text-align: right;">


                  <input style="width:300px;" class="btn btn-success btn-lg btn-block" id="imprime"
                    value="Imprime ticket" onclick=imprimeTicket() type="button">
                </td>
                -->
                  <tr>
                    <td>
                      <label></label>
                    </td>
                    <td style="width:500px;hight=100px;" colspan="3">
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <label>Nº Transf:</label>
                    </td>
                    <td style="width:500px;" colspan="3">
                      <input style="width:500px;" name="trans" id="trans"></input>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <label>Notas</label>
                    </td>
                    <td style="width:500px;" colspan="3">
                      <input style="width:500px;" name="nota" id="nota"></input>
                      <input style="width:500px;" name="guardacliente" id="guardacliente" hidden></input>
                      <!-- estos campos son para guardar cliente nuevo los pongo aca porque no me los lee de la ventana modal-->
                      <input type="text" name="nombre" id="nombre" hidden />
                      <input type="text" name="calle" id="calle" hidden />
                      <input type="text" name="localidad" id="localidad" hidden />
                      <input type="text" name="telefono" id="telefono" hidden />
                      <input type="text" name="iva" id="iva" hidden>
                      <input type="text" name="cuit" id="cuit" hidden />
                      <input type="text" name="mail" id="mail" hidden />

                      <input type="text" name="categoria" id="categoria" value="2" hidden />


                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

        </form>
      </div>

    </div>
  </form>

  <div class="overlay"></div> <!-- si sacoesto deja de andar el scrip -->

  <script type="text/javascript">
    let codigo_barra = false
    document.body.addEventListener("keydown", function (event) {
      //  console.log("Codigo de tecla",event.keyCode)

      //console.log(keyboardEvent.keyCode) 
      if (event.keyCode === 27) {
        console.log("esc")
        document.getElementById("search").focus();
        document.getElementById("search").value = ""
      }
      if (event.keyCode === 18) {
        console.log("apreto alt")
        document.getElementById("search2").value = ""
        document.getElementById("search2").focus();


      }
    });


    const listaCompras = document.querySelector("#lista_compra tbody");

    let productosLS;
    productosLS = obtenerProductosLocalStorage();
    console.log("productosLS", productosLS)
    largo = 0
    productosLS.forEach(function (producto) {

      const row = document.createElement('tr');
      console.log('tipo');
      console.log(producto.tipo);
      let total_item = 0;
      if (producto.tipo == 'kilo.') {
        total_item = (producto.precio * producto.unid * producto.cant);
      }
      else {
        total_item = (producto.precio * producto.cant);
      }
      console.log(total_item);
      total = total + total_item; //producto.id
      largo++
      console.log("largo", largo)
      row.innerHTML = `
               <tr style="color:black;;font-size:80%;">
                <td style="color:black;font-size:70%;" id="${largo}" hidden>
                    <input type="button" value="${producto.id}" name="idproducto_${largo}" id="idproducto_${largo}" hidden></input>
                </td>
                <td style="color:black;font-size:70%;" id="${largo}">
                    <input type="button" value="${producto.desc}" class="desc_${largo}" name="desc_${largo}" id="desc_${largo}"></input>     
                </td>
                <td style="color:black;font-size:70%;" align="right" class="text-right" id="${largo}">
                   <input type="button" text-align="right" onclick=cambio_cantidad(this,${largo}) 
                    value="${producto.cant}" class="cant_${largo}" name="cant_${largo}" id="cant_${largo}"></input>
                </td>
                <td style="color:black;font-size:70%; color:green;" class="text-right" contenteditable='true'  id="${largo}">
                   <input style="color:green;" type="button" value="${producto.costo}" class="costo_${largo}" name="costo_${largo}" id="costo_${largo}"
                      ></input>
                </td>
                 <td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="${largo}">
                   <input type="button" style="color: rgb(255, 102, 0);" value="${producto.costo_debito}" class="costo_debito_${largo}" name="costo_debito_${largo}" id="costo_debito_${largo}" hidden
                      ></input>
                </td>
                <td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="${largo}">
                  <input  style="color:green;" type="button" value="${producto.subttl}" class="subttl_${largo}" name="subttl_${largo}" id="subttl_${largo}"></input>
                </td>
                <td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="${largo}">
                  <input  style="color: rgb(255, 102, 0);"  type="button" value="${producto.subttl_deb}" class="subttl_deb_${largo}" name="subttl_deb_${largo}" id="subttl_deb_${largo}" hidden></input>
                </td>
                <!--<td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="d${largo}" >
              
                </td>-->
                <td style="color:black;font-size:70%;" class="text-center">

                   <input onclick=eliminarProducto(this) type="button" value="X"
                    style="font-size:24px;color:white; font-size:80%; background-color:red;" id="${largo}"></input>
                    <input type="text" value="${producto.id}" name="cod" hidden="true"></input>
                    <input type="text" value="${producto.cant}" class="cant${largo}" id="cant${largo}" name="cant" hidden="true" ></input>
                    <input type="text" value="${producto.desc}" class="desc${largo}" id="desc${largo}" name="desc" hidden="true" ></input>
                    <input type="text" value="${producto.costo}" class="costo${largo}" id="costo${largo}" name="costo" hidden="true"></input>
                    <input type="text" value="${producto.costo_debito}" class="costo_debito${largo}" id="costo_debito${largo}" name="costo_debito" hidden="true" ></input>
                    <input type="text" value="${producto.subttl}" class="subttl${largo}" id="subttl${largo}" name="subttl" hidden="true" ></input>
                    <input type="text" value="${producto.subttl_debito}" class="subttl_debito${largo}" id="subttl_debito${largo}" name="subttl_debito" hidden="true"></input>
                    
                   
            
      
                  
                </td>
              </tr>
              `;

      listaCompras.appendChild(row);
    })


    calculoTotal()

    localStorage.clear();




    console.log("pedidos entrada :", document.getElementById("combo_pedidos").options.length)
    console.log("pedidos preparacion :", document.getElementById("combo_pedidos2").options.length)
    document.getElementById('items').value = document.getElementById("combo_pedidos").options.length;
    document.getElementById('items2').value = document.getElementById("combo_pedidos2").options.length;
    var condicion = "1"
    function myFunction(e) {
      console.log("entro aca")
      // document.getElementById("saldo").value = e.options[e.selectedIndex].getAttribute("data-saldo");
      document.getElementById("id_cliente").value = e.options[e.selectedIndex].getAttribute("value");
      document.getElementById("cliente").value = e.options[e.selectedIndex].getAttribute("title");
      document.getElementById("saldo_cliente").value = e.options[e.selectedIndex].getAttribute("data-saldo");
      console.log("saldo =", e.options[e.selectedIndex].getAttribute("data-saldo"))
      let ctacte = e.options[e.selectedIndex].getAttribute("ctacte")
      console.log("ctacte =", ctacte)

      if (tipodeventa !== "REMITO" && (ctacte > 0)) {
        console.log("no es remito y es ctacte")
        document.getElementById('condicion4').checked = true
      }
      else document.getElementById('condicion4').checked = false


    }

    function funcion_reparto(e) {
      console.log("entro reparto")
      document.getElementById("id_reparto").value = e.options[e.selectedIndex].getAttribute("value");
    }


    if (document.getElementById('condicion4').checked) {


      console.log("por aca");
    }
    var var_caja = "Negocio";
    console.log("empiezo")
    document.getElementById('guardacliente').value = "NO";
    /*
        $('#combo_cliente').change(function () {
          console.log('cambio cliente');
          console.log(document.getElementById('combo_cliente').value);
          document.getElementById('id_cliente').value = document.getElementById('combo_cliente').value;
    
         // if (tipodeventa == "Comercio") {
            console.log('entro cambio cliente comercio', document.getElementById('combo_cliente').value);
            //document.getElementById('cliente').value = e.options[e.selectedIndex].getAttribute("title");
            document.getElementById('id_cliente').hidden = false;
        //  }
        });
    */
    $('#tipo').change(function () {
      console.log('cambio iva');
      console.log(document.getElementById('tipo').value);
      document.getElementById('iva').value = document.getElementById('tipo').value;
    });
    var tipodeventa = document.getElementById('tipodeventa').value;
    field = document.querySelector('#caja');
    field.value = "Negocio";
    console.log("tpo", tipodeventa)
    if (tipodeventa == "REMITO") {
      console.log("remito2")
      document.getElementById('condicion3').checked = true
    }
    if (tipodeventa == "Particular") {
      // document.getElementById('pago').hidden = false
      // document.getElementById('combo_cliente').type = true
      document.getElementById('id_cliente').hidden = true
      document.getElementById('id_reparto').hidden = true
    }
    else {
      document.getElementById('cliente').hidden = true
      document.getElementById('combo_cliente').hidden = false
      document.getElementById('combo_reparto').hidden = false
      document.getElementById('id_cliente').hidden = false
      document.getElementById('id_reparto').hidden = false
      document.getElementById('btnmodal').hidden = false
    }

    $(document).on("change", "input[type=radio]", function () {
      console.log("envio ");
      if (document.getElementById('condicion1').checked) {
        condicion = "Efectivo"
        console.log("condicion1", condicion);
        document.getElementById('efec').value = parseFloat(document.getElementById('total').value)
        document.getElementById('tran').value = 0
        document.getElementById('chk').value = parseFloat(document.getElementById('tran').value) + parseFloat(document.getElementById('efec').value)
        //document.getElementById('pago').hidden = false
        // document.getElementById('vuelto').hidden = false
        document.getElementById('total').hidden = false;
        document.getElementById('id_cliente').hidden = true;
        document.getElementById('total_lista').hidden = true;
        document.getElementById('combo_cliente').hidden = true
        document.getElementById('btnmodal').hidden = true;
        document.getElementById('cliente').hidden = false
      }
      else if (document.getElementById('condicion2').checked) {
        console.log("condicion2");
        condicion = "Debito"
        document.getElementById('total').hidden = true;
        document.getElementById('total_lista').hidden = false;
        document.getElementById('pago').hidden = true
        document.getElementById('vuelto').hidden = true
        document.getElementById('id_cliente').hidden = true;
        document.getElementById('combo_cliente').hidden = true
        document.getElementById('btnmodal').hidden = true;
        document.getElementById('cliente').hidden = false

      }
      else if (document.getElementById('condicion3').checked) {
        console.log("condicion3");
        condicion = "MercadoPago"
        document.getElementById('efec').value = 0
        document.getElementById('tran').value = parseFloat(document.getElementById('total').value)
        document.getElementById('chk').value = parseFloat(document.getElementById('tran').value) + parseFloat(document.getElementById('efec').value)
        document.getElementById('total').hidden = false;
        document.getElementById('total_lista').hidden = true;
        document.getElementById('pago').hidden = true
        document.getElementById('vuelto').hidden = true
        document.getElementById('id_cliente').hidden = true;
        document.getElementById('combo_cliente').hidden = true
        document.getElementById('btnmodal').hidden = true;
        document.getElementById('cliente').hidden = false
      }
      else if (document.getElementById('condicion4').checked) {
        console.log("condicion4");
        condicion = "CuentaCorriente"
        document.getElementById('total').hidden = false;
        document.getElementById('total_lista').hidden = true;
        document.getElementById('pago').hidden = true
        document.getElementById('vuelto').hidden = true
        document.getElementById('cliente').hidden = true
        document.getElementById('id_cliente').hidden = false;
        document.getElementById('combo_cliente').hidden = false;
        document.getElementById('btnmodal').hidden = false;


      }
      if (tipodeventa == "Comercio") {
        document.getElementById('cliente').hidden = true
        document.getElementById('id_cliente').hidden = false;
        document.getElementById('combo_cliente').hidden = false;
        document.getElementById('btnmodal').hidden = false;
      }
    });

    $(document).on("change", "input[type=radio]", function () {
      console.log("envio ");
      if (document.getElementById('tipo1').checked) {
        var_caja = "Negocio"
        console.log("var_caja", var_caja);
        field = document.querySelector('#caja');
        field.value = "Negocio";

      }
      else if (document.getElementById('tipo2').checked) {
        var_caja = "Reparto"
        console.log("var_caja", var_caja);
        field = document.querySelector('#caja');
        field.value = "Reparto";
      }
    });

    var mydata = [];
    console.log(mydata);

    $(document).ready(function () {
      /*codigo de barras
      var barcode = "";
      $(document).keydown(function (e) {
        console.log("entro")
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13)// Enter key hit
        {
          alert(barcode);
        }
        else if (code == 9)// Tab key hit
        {
          alert(barcode);
        }
        else {
          barcode = barcode + String.fromCharCode(code);
        }
      });
      

      $('#search2').change(function () {
        console.log("this 1", $(this).val())
        let fila = search2_table($(this).val());
        //document.getElementById("search").focus();
        document.getElementById("search2").value = ""
        console.log("fila 2:", fila)
        console.log("tabla tr2", $('#tabla tr')[fila][codigo_producto] )
       
        // console.log("fila 2:", valor)
        //let pp = "Descuentoapartir_"+fila
        //console.log("Descuentoapartir_", $('#tabla tr').pp)
        codigo_barra = true
        // console.log("e target", );
        //$("#356.sumacompra").click()

      });
      */

      $('#search2').change(function () {
        console.log("this 1", $(this).val())
        let CodigoProducto = search2_table($(this).val());
        document.getElementById("search2").value = ""
        console.log("codigo:", CodigoProducto)
        codigo_barra = true
        var ejecuta = "#" + CodigoProducto.trim() + ".sumacompra"
        console.log("ejecuta", ejecuta)
        $(ejecuta).click()
        document.getElementById("search2").value = ""
        document.getElementById("search2").focus();
        play()
      });

      $('#efec').keyup(function () {
        console.log("efec", $(this).val())
         document.getElementById('chk').value = parseFloat(document.getElementById('tran').value) + parseFloat(document.getElementById('efec').value)
        
      });

      $('#tran').keyup(function () {
        console.log("tran", $(this).val())
         document.getElementById('chk').value = parseFloat(document.getElementById('tran').value) + parseFloat(document.getElementById('efec').value)
        
      });


      function play() {
        var beepsound = new Audio("../img/button-09a.mp3");
        beepsound.play();
        console.log("sonido")
      }

      $('#visible').change(function () {
        if (this.checked) {
          console.log('1');
        } else {
          console.log('0');
        }
      });

      var self = this;

      $('#search').keyup(function () {
        codigo_barra = false
        search_table($(this).val());
      });



      $('#pago').keyup(function () {
        ptotal = document.querySelector('#total');
        ptotal.value = parseFloat(total.toFixed(0));
        //mpago = document.querySelector('#pago');
        mpago = ptotal.value;
        mvuelto = (mpago.value - ptotal.value).toFixed(0)
        console.log("ptotal :", ptotal.value, "mpago :", mpago.value, "vuelto :", mvuelto)
        field = document.querySelector('#vuelto');
        field.value = mvuelto;
      });

      $('#cambia_costo').keyup(function () {
        console.log("cambia costo")
        //calcula_precio($(this).val());
      });

      function search_table(value) {

        $('#tabla tr').each(function () {
          var found = 'false';

          $(this).each(function () {
            if ($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0) {
              found = 'true';
            }
          });

          if (found == 'true') {
            $(this).show();
          }
          else {
            $(this).hide();
          }

        });
      }


      function search2_table(value) {
        console.log("value", value)
        let nrowa = 0;
        $('#tabla tr').each(function (e) {
          var found = 'false';
          let fila = 0
          $(this).each(function () {

            if ($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0) {
              //console.log("this 2", $(this))
              console.log("e", e)
              found = 'true';
              var trElement = $(this).closest('tr').find('td').eq(0).html();
              e = trElement;
            }
          });

          if (found == 'true') {
            $(this).show();
            fila = fila + 1;
            console.log("tabla tr", $('#tabla tr')[e])
          }
          else {
            $(this).hide();
          }
          if (fila == 1) {
            console.log("llego", e)
            nrowa = e
            return e;
          }
          return nrowa
        });
        return nrowa
      }

    });



    /*
    function search2_table(value) {
    
            console.log ("value", value)
            let nrowa = 0;
            $('#tabla tr').each(function (e) {
              var found = 'false';
              let fila = 0
              $(this).each(function () {
    
                if ($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0) {
                  console.log("this 2", $(this))
                  console.log("e", e)
                  //console.log("tabla tr",  $('#tabla tr') )
                  //var trElement = $(this).parent().parent(); // trae la tabla
                  var trElement = $(this).closest('tr').find('td').eq(0).html();
                  e= trElement;
                  //$(this).closest('tr').find('td:first-child').html(); // trae 2 lineas
    
                  console.log("trElement", trElement)
                  //console.log("mi_table", mi_table)
                  found = 'true';
                }
    
              });
    
              if (found == 'true') {
                $(this).show();
                fila = fila + 1;
               // console.log("tabla tr", $('#tabla tr')[e])
              }
              else {
                $(this).hide();
              }
              if (fila == 1) {
                console.log("llego", e)
                nrowa = e
                return e;
              }
              return nrowa
            });
            return nrowa
          }
    
        });
    */

    $('.sumacompra').on('click', function (e) {

      console.log('agregar carrito');
      console.log("e. target", e.target);



      var id = (e.target.value);
      console.log("id :", id);
      console.log("tpos ", tipodeventa)

      if (tipodeventa == "Comercio") {

        costo = parseFloat($("#precio2_" + id).val());
        costo_debito = parseFloat($("#precio2_debito_" + id).val());
        console.log("Comercio", costo);
      }
      else {
        costo = parseFloat($("#precio1_" + id).val());
        costo_debito = parseFloat($("#precio1_debito_" + id).val());
        console.log("Particular", costo);

      }
      console.log("costo", costo);
      console.log("costo_debito", costo_debito);

      var cant = "";
      //console.log("cantidad :", cant);

      while (cant <= 0) {

        console.log("entro12")
        while (!cant || isNaN(cant)) {
          console.log("codigo de barra", codigo_barra)
          if (codigo_barra) { cant = 1 } else {
            cant = prompt('Escribe un número por favor', cant)
          }
          if (cant < 0)
            cant = 0
          console.log("numero ingeresado", cant)
          if (cant == "fin") {
            console.log("entro en fin")
          }
          else if (isNaN(cant))
            cant = ""
        }
        console.log("cantidada", cant)
        if (!cant || cant == 0) {
          console.log("entro")
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'entre cantidad ',
            showConfirmButton: true
          });
          return
        }
        else {
          cant = parseFloat(cant).toFixed(3)
        }

        console.log("cant: ", Number(cant))


      }
      //var cant = parseFloat(prompt("Cantidad : ", cant));
      //cant = cant.toFixed(3);
      console.log("cantidad afuera :", cant);
      //var costo_temp = parseFloat(prompt("Precio : ", costo));
      //cantdedesc_temp =  ".descuentoapartir_" + id;


      // calculo precio unitario segun la cantidad solo partiulares



      descuentoapartir = parseFloat($("#Descuentoapartir_" + id).val())
      console.log("cantidad a partir de descuento", descuentoapartir)

      var descuentoxunidad = parseFloat($("#Descuentoxunidad_" + id).val())
      console.log("cantidad de descuento", descuentoxunidad)
      desctemp = $("#desc_" + id).val();
      if (tipodeventa == "Particular") {
        if (cant >= descuentoapartir & descuentoapartir > 0) {
          costo = costo - descuentoxunidad
          costo_debito = costo_debito - descuentoxunidad
          desctemp = "* " + desctemp
        }
        console.log("conto condescutnto", costo)
        console.log("costo debito 1", costo_debito)
      }


      var costo_temp = parseFloat(costo);
      costo_temp = costo_temp.toFixed(2);

      var costo_debito_temp = parseFloat(costo_debito);
      costo_debito_temp = costo_debito_temp.toFixed(2);

      console.log("costo_temp 1:", costo_temp);
      console.log("costo_debito_temp 1:", costo_debito_temp);
      /*
            if (cant>=descuentoapartir){
                costo_temp = costo_temp-descuentoxunidad
                      console.log("costo_temp 2:", costo_temp);
            }
      */
      var largomydata = mydata.length + 1;
      console.log("largo mydata : ", largomydata);
      //console.log("porcentaje precio2 1:", parseFloat($("#porcprecio2_" + id).val()));
      console.log("costo_temp :", costo_temp);

      //mayor_temp = (parseFloat($("#porcprecio2_" + id).val()) / 100 * costo_temp + parseFloat(costo_temp)).toFixed(2);
      //final_temp = (parseFloat($("#porcprecio1_" + id).val()) / 100 * costo_temp + parseFloat(costo_temp)).toFixed(2);


      //console.log("mayor_temp : ", mayor_temp)
      const infoProducto = {
        id: id,
        desc: desctemp,
        cant: parseFloat(cant).toFixed(3),
        costo: costo_temp,
        costo_debito: costo_debito_temp,
        //fecha: $("fecha_" + id).value,
        //porcprecio1: parseFloat($("#porcprecio1_" + id).val()),
        //mayor: mayor_temp,

        subttl: parseFloat((cant * costo)).toFixed(0),
        subttl_deb: parseFloat((cant * costo_debito_temp)).toFixed(0),
        //porcprecio2: parseFloat($("#porcprecio2_" + id).val()),
        //final: final_temp,
        id_borrado: largomydata,
        desc_original: $("#desc_" + id).val(),
        costo_original: parseFloat($("#precio1_" + id).val()),
      };
      //console.log("subtotal:", subttl);
      console.log("infoproducto : ", infoProducto);
      //console.log(infoProducto);
      mydata.push(infoProducto);
      console.log("Legth mydata :", mydata.length.toString());
      let largo = mydata.length.toString();
      console.log("mydata :", largo);



      const row = document.createElement('tr');
      // id="+String.fromCharCode(34)+largo.toString()+String.fromCharCode(34));
      console.log("row antes: ", row);
      //console.log("tamaño : ",  mydata.length.toString() )
      //row= row+ mydata.length;
      //console.log("row despues: ",row);

      var trs = $("table tbody tr");
      var idnuevo = 0;
      //console.log("trs ", trs);

      $.each(trs, function (i, tr) {
        if (!$(tr).attr('id')) {
          idnuevo = i + 1;
        }
      });

      // armado linea de producto
      row.innerHTML = `
               <tr style="color:black;;font-size:80%;">
                <td style="color:black;font-size:70%;" id="${largo}" hidden>
                    <input type="button" value="${infoProducto.id}" name="idproducto_${largo}" id="idproducto_${largo}" hidden></input>
                </td>
                <td style="color:black;font-size:70%;" id="${largo}">
                    <input type="button" value="${infoProducto.desc}" class="desc_${largo}" name="desc_${largo}" id="desc_${largo}"></input>     
                </td>
                <td style="color:black;font-size:70%;" align="right" class="text-right" id="${largo}">
                   <input type="button" text-align="right" onclick=cambio_cantidad(this,${largo}) 
                    value="${cant}" class="cant_${largo}" name="cant_${largo}" id="cant_${largo}"></input>
                </td>
                <td style="color:black;font-size:70%; color:green;" class="text-right" contenteditable='true'  id="${largo}">
                   <input style="color:green;" type="button" value="${infoProducto.costo}" class="costo_${largo}" name="costo_${largo}" id="costo_${largo}"
                      ></input>
                </td>
                 <td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="${largo}">
                   <input type="button" style="color: rgb(255, 102, 0);" value="${infoProducto.costo_debito}" class="costo_debito_${largo}" name="costo_debito_${largo}" id="costo_debito_${largo}" hidden
                      ></input>
                </td>
                <td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="${largo}">
                  <input  style="color:green;" type="button" value="${infoProducto.subttl}" class="subttl_${largo}" name="subttl_${largo}" id="subttl_${largo}"></input>
                </td>
                <td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="${largo}">
                  <input  style="color: rgb(255, 102, 0);"  type="button" value="${infoProducto.subttl_deb}" class="subttl_deb_${largo}" name="subttl_deb_${largo}" id="subttl_deb_${largo}" hidden></input>
                </td>
                <!--<td style="color:black;font-size:70%;" class="text-right" contenteditable='true'  id="d${largo}" >
              
                </td>-->
                <td style="color:black;font-size:70%;" class="text-center">

                   <input onclick=eliminarProducto(this) type="button" value="X"
                    style="font-size:24px;color:white; font-size:80%; background-color:red;" id="${largo}"></input>
                    <input type="text" value="${infoProducto.id}" name="cod" hidden="true"></input>
                    <input type="text" value="${cant}" class="cant${largo}" id="cant${largo}" name="cant" hidden="true" ></input>
                    <input type="text" value="${infoProducto.desc}" class="desc${largo}" id="desc${largo}" name="desc" hidden="true" ></input>
                    <input type="text" value="${infoProducto.costo}" class="costo${largo}" id="costo${largo}" name="costo" hidden="true"></input>
                    <input type="text" value="${infoProducto.costo_debito}" class="costo_debito${largo}" id="costo_debito${largo}" name="costo_debito" hidden="true" ></input>
                    <input type="text" value="${infoProducto.subttl}" class="subttl${largo}" id="subttl${largo}" name="subttl" hidden="true" ></input>
                    <input type="text" value="${infoProducto.subttl_debito}" class="subttl_debito${largo}" id="subttl_debito${largo}" name="subttl_debito" hidden="true"></input>
                    
                   
            
      
                  
                </td>
              </tr>
              `;

      //var elt=document.getElementById("lista_compra");
      //console.log("elt ", elt);
      //console.log("elt.firstChild.id ", elt.firstChild.id);
      //var out=document.getElementById("out");
      //out.innerHTML="name="+elt.firstChild.name+",id="+elt.firstChild.id
      console.log("row a agregar: ", row);
      listaCompra.appendChild(row);
      //$("table tbody tr").attr('id', mydata.length);
      // $("tr").attr('id', mydata.length);
      //location.reload();
      subttl_temp = ".subttl_" + largo;
      console.log("subttl_temp", subttl_temp);
      console.log("cant : ", cant, ",cost_temp :", costo_temp);
      // 23/08 cuando refrescaba me actulizaba el primer item
      //document.querySelector(subttl_temp).value = parseFloat(cant * costo_temp).toFixed(0);
      //aca cambie
      subttl_debito_temp = ".subttl_deb_" + largo;
      console.log("subttl_debito_temp = ", subttl_debito_temp);
      document.querySelector(subttl_debito_temp).value = parseFloat(cant * costo_debito_temp).toFixed(0);

      subttl_debito_temp = ".subttl_debito" + largo;
      console.log("subttl_debito_temp = ", subttl_debito_temp);
      document.querySelector(subttl_debito_temp).value = parseFloat(cant * costo_debito_temp).toFixed(0);

      $(document).ready(function () {
        var trs = $("table tbody tr");
        // console.log("trs ", trs);
        $.each(trs, function (i, tr) {
          if (!$(tr).attr('id')) {
            // i+1  
            $(tr).attr('id', largo);
          }
        });
      });
      total = 0;
      mtotal_debito = 0;
      mlargo = 0;



      // calculo el total general
      $("#lista_compra tbody tr").each(function (idx, fila) {

        total = parseFloat(total) + parseFloat(fila.children[5].firstElementChild.value);
        console.log("total item", idx, " :", parseFloat(fila.children[5].firstElementChild.value));

        mtotal_debito = parseFloat(mtotal_debito) + parseFloat(fila.children[6].firstElementChild.value);
        console.log("total debito item", idx, " :", parseFloat(fila.children[6].firstElementChild.value));
        mlargo = mlargo + 1;
      });
      field = document.querySelector('#total');
      field.value = parseFloat(total.toFixed(2));
      $("#total_tabla").text(total);

      field = document.querySelector('#total_debito');
      field.value = parseFloat(mtotal_debito.toFixed(2));
      $("#total_debito").text(mtotal_debito);

      field = document.querySelector('#total_lista');
      field.value = parseFloat(mtotal_debito.toFixed(2));
      $("#total_lista").text(mtotal_debito);

      //console.log("total general", total);
      //console.log("total debito 4", mtotal_debito);
      $("#item_tabla").text(mlargo);
      field = document.querySelector('#largo');
      field.value = mlargo;
      field = document.querySelector('#pago');
      field.value = parseFloat(total.toFixed(2));
      console.log("Pago general", total);

      document.getElementById("search").focus();
      $("input:text").focus(function () { $(this).select(); });
    });



    function eliminarProducto(ctl) {
      // console.log('eliminar producto :',productoaeliminar);
      console.log("ctl", ctl);
      $(ctl).parents("tr").remove();

      total = 0;
      mtotal_debito = 0;
      mlargo = 0;
      $("#lista_compra tbody tr").each(function (idx, fila) {
        total = total + parseFloat(fila.children[5].firstElementChild.value);
        mtotal_debito = mtotal_debito + parseFloat(fila.children[6].firstElementChild.value);
        mlargo = mlargo + 1;
      });
      field = document.querySelector('#total');
      field.value = total;
      $("#total_tabla").text(total);
      field = document.querySelector('#total_debito');
      field.value = mtotal_debito;
      $("#total_debito").text(mtotal_debito);
      field = document.querySelector('#total_lista');
      field.value = mtotal_debito;
      $("#total_lista").text(mtotal_debito);
      $("#item_tabla").text(mlargo);
      console.log("total ", total);
      field = document.querySelector('#largo');
      field.value = mlargo;
    };

    function validar() {
      console.log("validar");
      console.log("Condicion :", condicion);

      if (document.getElementById('efec').value == "") {
        console.log("efec vacio");
        document.getElementById('efec').value = 0
      }
      if (document.getElementById('tran').value == "") {
        console.log("tran vacio");
        document.getElementById('tran').value = 0
      }
      document.getElementById('chk').value = parseFloat(document.getElementById('tran').value) + parseFloat(document.getElementById('efec').value)

      if ((document.getElementById('condicion4').checked) == false) {
        console.log("no es CuentaCorriente 1267")
      
        if (document.getElementById('chk').value !== document.getElementById('total').value) {
          console.log("totales no coninciden")
          //console.log("cliente : "document.getElementById('combo_cliente').value);
          document.getElementById("efec").focus();
          Swal.fire({
            icon: 'error',
            title: 'total no coincide',
            text: 'corrija totales !!!...',
            showConfirmButton: false,
            timer: 2000,
          });
          return false;

        }
      }
      else{
        console.log("es CuentaCorriente 1285, efectivo y transferencia deben estar en vacio ")
        document.getElementById('efec').value = 0
        document.getElementById('tran').value = 0
      }



      mcliente = document.getElementById('combo_cliente').value
      console.log("mcliente=", mcliente)
      console.log("cliente :", document.getElementById('combo_cliente').value)

      if (document.getElementById('efec').value == "") {
        console.log("efec vacio");
        document.getElementById('efec').value = 0
      }
      if (document.getElementById('tran').value == "") {
        console.log("tran vacio");
        document.getElementById('tran').value = 0
      }
      if (condicion == "CuentaCorriente" && mcliente == 0) {
        console.log("entro en cuenta corriente")
        //console.log("cliente : "document.getElementById('combo_cliente').value);
        // document.getElementById("combo_cliente").focus();
        Swal.fire({
          icon: 'error',
          title: 'Elija un C L I E N T E ',
          text: 'TIENE CUENTA CORRIENTE !!!...',
          showConfirmButton: false,
          timer: 2000,
        });
        return false;

      }
      if (tipodeventa == "Comercio" || tipodeventa == 'REMITO' || var_caja == 'Reparto') {
        cliente = document.getElementById('cliente').value.trim();
        console.dir(cliente);
        if (cliente == null || cliente.length == 0) {
          document.getElementById("combo_cliente").focus();
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Elija un cliente???',
            showConfirmButton: false,
            timer: 2000,
          });
          return false;
        }
      }
      /*if (var_caja == 'Reparto'){
        cliente = document.getElementById('cliente').value.trim();
        console.dir(cliente);
        if (cliente == null || cliente.length == 0) {
          document.getElementById("cliente").focus();
          return false;
        }
      }
      */

      if ((document.getElementById('condicion1').checked) ||
        (document.getElementById('condicion2').checked) ||
        (document.getElementById('condicion3').checked) ||
        (document.getElementById('condicion4').checked)) {
        console.log("true");
      }
      else {
        console.log("falso");
        document.getElementById("condicion1").focus();
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'Cómo paga???',
        });
        return false;
      }
      cambio_fecha()

      condicion = ""





      if (document.getElementById('condicion1').checked) {
        condicion = "Efectivo"
      }

      else if (document.getElementById('condicion2').checked) {
        condicion = "Debito"
      }
      else if (document.getElementById('condicion3').checked) {
        condicion = "Transferencia"
        cliente = document.getElementById('cliente').value.trim();
        console.log("cliente", cliente);
        if (cliente == null || cliente.length == 0) {
          document.getElementById("cliente").focus();
          console.log("cliente es null ", cliente);
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Cargue Nombre y telefono',
            showConfirmButton: false,
            timer: 2000
          });
          return false;
        }
        if (document.getElementById('trans').value == '') {
          console.log("entro en trans ");
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'cargue numero de transferencia',
            showConfirmButton: false,
            timer: 2000
          });
          document.getElementById("trans").focus();
          return false;
          document.getElementById("trans").focus();
        }

      }
      else if (document.getElementById('condicion4').checked) {
        condicion = "CuentaCorriente"
      }

      console.log("condicion :", condicion);
      var pago = document.getElementById('pago').value;
      if (pago == "") {
        pago = 0;
      }
      console.log("Pago :", pago);

      var table = document.getElementById("prod_compra");
      console.log("table", table);
      total = 0;
      $("#lista_compra tbody tr").each(function (idx, fila) {
        total = total + parseFloat(fila.children[5].firstElementChild.value);
      });
      field = document.querySelector('#total');
      field.value = total;
      console.log("total validar ", total);



      if (total <= 0) {
        console.log("entro en total", total);
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'total 0'
        });
      }


      /*  if (condicion == "Efectivo") {
  
          console.log("entro en condicion1")
          if (pago <= 0) {
  
            console.log("entro en pago ", pago);
            Swal.fire({
              icon: 'error',
              title: 'Oops...',
              text: 'cargue con cuanto pago',
            });
            document.getElementById("pago").focus();
            return false;
            document.getElementById("pago").focus();
          }
          
        }
      */
      if (total > 0) {
        console.log("entro en pago ", pago);
        if (pago > 0) {
          salgo_aprocesar()
          //document.getElementById("procesarventa").submit();
        };
        console.log("antes condicion :", condicion);
        if (condicion == "CuentaCorriente") {
          salgo_aprocesar()

        }
        if (condicion !== "Efectivo") {
          salgo_aprocesar()

        }
      }

      /*if (document.getElementById('reparto').value == "") {
        var_caja = "Mostrador"
      }
      else {
        var_caja = "Reparto"
      }
      */
      var_caja = "Mostrador"
      console.log("var_caja : ", var_caja)
      //  | console.log(pepe)
      /*
      field = document.querySelector('#caja');
      field.value = caja;
      console.log("total validar ", total);
      */
    }





    function salgo_aprocesar() {
      document.getElementById('boton').value = 'Enviando, por favor espere...';
      //document.getElementById('boton').disabled = true;
      /*Swal.fire({
        icon: 'success',
        title: 'Genial...',
        text: 'Procesando venta',
        showConfirmButton: false,
        timer: 3000
      });
      */
      document.getElementById("procesarventa").submit();
    }

    function cambio_cantidad(row, id) {
      console.log("Funcion de cambio de cantidad ");
      codigo = $("#idproducto_" + id).val()
      console.log("codigo de producto", codigo);
      costo_temp = ".costo_" + id;
      costo_debito_temp = ".costo_debito" + id;
      costo_actual = parseFloat(document.querySelector(costo_temp).value).toFixed(2);
      costo_debito_actual = parseFloat(document.querySelector(costo_debito_temp).value).toFixed(2);

      cant_temp = ".cant_" + id;
      cant_actual = parseFloat(document.querySelector(cant_temp).value).toFixed(3);
      console.log("cantidad actual2", cant_actual)
      var doc = document.getElementById("lista_compra");
      var cant = row.value;
      //console.log("cantidad  3", cant);
      // var cant_nuevo = cargo_cant(cant)
      /*
            var descuentoapartir = parseFloat($("#descuentoapartir" + id).val())
            console.log("cantidad a partir de descuento",descuentoapartir)
            var descuentoxunidad =  parseFloat($("#descuentoxunidad" + id).val())
            console.log("cantidad de descuento",descuentoxunidad)
      
            var descripcion_temporal= $("#descOriginal_" + id).val()
            console.log("descripcion original 1", descripcion_temporal)
      */
      descuentoapartir = parseFloat($("#Descuentoapartir_" + codigo).val())
      console.log("cantidad a partir de descuento", descuentoapartir)

      var descuentoxunidad = parseFloat($("#Descuentoxunidad_" + codigo).val())
      console.log("cantidad de descuento", descuentoxunidad)
      descripcion_temporal = $("#desc_" + codigo).val();

      console.log("entro en cargo_cant")
      var cant_nuevo = 0
      while (cant_nuevo <= 0) {
        console.log("entro1")

        var cant_nuevo = prompt("Cambio de Cantidad : ", cant);
        console.log("cantidad", cant_nuevo)
        if (!cant_nuevo || cant_nuevo == 0) {
          console.log("entro")
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'entre cantidad',
            showConfirmButton: true
          });
          return
        }
        else {
          cant_nuevo = parseFloat(cant_nuevo).toFixed(3)
        }



        //var cant_nuevo = parseFloat(prompt("Cambio de Cantidad : ", cant)).toFixed(3);
        row.value = cant_nuevo;
        console.log("cant_nuevo: ", Number(cant_nuevo))
        if (Number(cant_nuevo) <= 0) {
          console.log("entro2")
          if (Number(cant_nuevo) <= 0) {
            console.log("entro3")
            console.log("total", cant_nuevo);
          }
        }
      }
      console.log("cant_nuevo: ", cant_nuevo)
      console.log("row.value antes", row.value)
      row.value = cant_nuevo;
      console.log("row.value despues", row.value)

      cant_temp = ".cant" + id;
      console.log("cant_temp :", cant_temp)
      console.log("hola document.querySelector(cant_temp).value :", document.querySelector(cant_temp))
      document.querySelector(cant_temp).value = parseFloat(cant_nuevo).toFixed(3);
      console.log("cant_nuevo despues de la funcion", cant_nuevo)

      // calculo precio unitario para descuento por horma
      if (tipodeventa == "Particular") {
        costo_actual = parseFloat($("#precio1_" + codigo).val())
        console.log("costo original", costo_actual)


        if (cant_nuevo >= descuentoapartir & descuentoapartir > 0) {
          console.log("entro")
          console.log("costo_actual adentro del if", costo_actual)
          costo_actual = costo_actual - descuentoxunidad
          costo_debito_actual = costo_debito_actual - descuentoxunidad
          console.log("costo_debito_actual despues de la resta", costo_debito_actual)
          descripcion_temporal = "* " + $("#desc_" + codigo).val();
          //document.querySelector(desctemp).value = ""
        }
        // actualizo descripcion de la tabla que se ve
        desctemp = ".desc_" + id;
        document.querySelector(desctemp).value = descripcion_temporal
        // actualizo descripcion de la tabla que NO se ve
        desctemp = ".desc" + id;
        document.querySelector(desctemp).value = descripcion_temporal

        // actualizo precio uitario de la tabla que se ve
        costotemp = ".costo_" + id;
        document.querySelector(costotemp).value = parseFloat(costo_actual).toFixed(0);


        // jesus
        //document.querySelector(costotemp).value = parseFloat(costo_debito_actual).toFixed(0);
        // actualizo precio uitario debito la tabla que se ve jesus
        costotemp = ".costo_debito_" + id;
        console.log(" costotemp= ", costotemp)
        document.querySelector(costotemp).value = parseFloat(costo_debito_actual).toFixed(0);

        console.log("costo con descuetnto jesus", costo_actual)
      }



      subttl_temp = ".subttl" + id;
      document.querySelector(subttl_temp).value = parseFloat(cant_nuevo * costo_actual).toFixed(0);
      // actualizo subtotal
      subttl_temp = ".subttl_" + id;
      console.log(" subttl_temp = ", subttl_temp)
      //console.log("antes Sub total " + id, document.querySelector(subttl_temp).value)
      document.querySelector(subttl_temp).value = parseFloat(cant_nuevo * costo_actual).toFixed(0);
      //console.log("Sub total despues", document.querySelector(subttl_temp).value)

      subttl_deb_temp = ".subttl_deb_" + id;
      console.log("subttl_deb_temp = ", subttl_deb_temp)
      document.querySelector(subttl_deb_temp).value = parseFloat(cant_nuevo * costo_debito_actual).toFixed(0);
      // actualizo subtotal debito
      subttl_deb_temp = ".subttl_deb_" + id;
      console.log(" subttl_deb_temp = ", subttl_deb_temp)
      console.log("antes Sub total " + id, document.querySelector(subttl_temp).value)
      //document.querySelector(subttl_deb_temp).value = parseFloat(cant_nuevo * costo_debito_actual).toFixed(0);
      console.log("Sub total despues", document.querySelector(subttl_temp).value)

      // 04/04 7:15
      costo_debito_temp = ".costo_debito" + id;
      console.log("subttl_debito_temp = ", costo_debito_temp);
      document.querySelector(costo_debito_temp).value = parseFloat(costo_debito_actual).toFixed(2);

      subttl_debito_temp = ".subttl_debito" + id;
      console.log("subttl_debito_temp = ", subttl_debito_temp);
      document.querySelector(subttl_debito_temp).value = parseFloat(cant_nuevo * costo_debito_actual).toFixed(0);
      //////////
      // actualizo cantidad
      cant_temp = ".cant_" + id;
      console.log("cant_temp ", cant_temp)
      console.log("document.querySelector(cant_temp).value antes", document.querySelector(cant_temp).value)
      document.querySelector(cant_temp).value = parseFloat(cant_nuevo).toFixed(3);
      console.log("document.querySelector(cant_temp).value despues", document.querySelector(cant_temp).value)
      console.log("cant_temp: ", document.querySelector(cant_temp).value)
      // calculo precio unitario segun la cantidad

      total = 0;
      mtotal_debito = 0;
      $("#lista_compra tbody tr").each(function (idx, fila) {
        total = total + parseFloat(fila.children[5].firstElementChild.value);
        mtotal_debito = mtotal_debito + parseFloat(fila.children[6].firstElementChild.value);
      });
      field = document.querySelector('#total');
      field.value = total;
      $("#total_tabla").text(total);

      field = document.querySelector('#total_debito');
      field.value = total_debito;
      $("#total_debito").text(mtotal_debito);

      // field = document.querySelector('#total_lista');
      // field.value = total_lista;
      // $("#total_lista").text(mtotal_debito);
      // console.log("total  ", mtotal_debito);
      field = document.querySelector('#total_lista');
      field.value = parseFloat(mtotal_debito.toFixed(2));
      $("#total_lista").text(mtotal_debito);

      console.log("row despues de cambio cantidad: ", row);
      var table = document.getElementById("prod_compra");
      console.log("table", table);
    }

    const listaCompra = document.querySelector("#lista_compra tbody");
    cambio_fecha()




    function total() {

      console.log("ejecutando total")
      total = 0;
      mtotal_debito = 0;
      $("#lista_compra tbody tr").each(function (idx, fila) {
        total = total + parseFloat(fila.children[6].firstElementChild.value);
        mtotal_debito = mtotal_debito + parseFloat(fila.children[7].firstElementChild.value);
      });
      field = document.querySelector('#total');
      field.value = total;
      $("#total_tabla").text(total);
      field = document.querySelector('#total_debito');
      field.value = mtotal_debito;
      $("#total_debito").text(mtotal_debito);
      $("#total_lista").text(mtotal_debito);


    }

    function cambio_fecha() {
      d = new Date();
      var z = n => ('0' + n).slice(-2);
      date = z(d.getUTCDate()) + '/' + z(d.getMonth() + 1) + '/' + z(d.getYear());
      console.log("date :", date);
      field = document.querySelector('#fecha');
      field.value = date;
      console.log(field.value);

      hora = z(d.getHours()) + ':' +
        z(d.getMinutes());
      field = document.querySelector('#horalocal');
      field.value = hora;
      console.log("hora :", hora);
    }

    function actual() {
      fecha = new Date(); //Actualizar fecha.
      dia = fecha.getDate(); //dia actual
      mes = fecha.getMonth() + 1; // mes actual
      año = fecha.getYear() - 100; // año actual
      hora = fecha.getHours(); //hora actual
      minuto = fecha.getMinutes(); //minuto actual
      segundo = fecha.getSeconds(); //segundo actual
      if (hora < 10) { //dos cifras para la hora
        hora = "0" + hora;
      }
      if (dia < 10) { //dos cifras para la hora
        dia = "0" + dia;
      }
      if (mes < 10) { //dos cifras para la hora
        mes = "0" + mes;
      }
      if (minuto < 10) { //dos cifras para el minuto
        minuto = "0" + minuto;
      }
      if (segundo < 10) { //dos cifras para el segundo
        segundo = "0" + segundo;
      }
      //devolver los datos:
      mireloj = dia + "/" + mes + "/" + año + "&nbsp&nbsp" +
        hora + ":" + minuto + ":" + segundo;
      return mireloj;
    }

    /*function actualizar() { //función del temporizador
      mihora = actual(); //recoger hora actual
      mireloj = document.getElementById("reloj"); //buscar elemento reloj
      mireloj.innerHTML = mihora; //incluir hora en elemento
    }
    setInterval(actualizar, 1000); //iniciar temporizador
*/
    function nvocliente() {
      console.log("nvocliente");
      var linea = "/cliente ";
      console.log("linea ", linea);
      window.open(linea, "byspel", "width=600,height=600,menubar=no");
    }



    $(document).on("click", "#btnmodal", function () {
      console.log("pasa")
      var nombre = $(this).data('nom');
      var nombre_cliente = $("#nombre").val(nombre);
      var calle = $("#calle").val(calle);
      var localidad = $("#localidad").val(localidad);
      var telefono = $("#telefono").val(telefono);
      var iva = $("#iva").val(iva);
      var cuit = $("#cuit").val(cuit);
      var mail = $("#mail").val(mail);
      // var categoria2 = $("#categoria").val(categoria);
      document.getElementById('iva').value = document.getElementById('tipo').value;



    })


    function check(e) {
      tecla = (document.all) ? e.keyCode : e.which;

      //Tecla de retroceso para borrar, siempre la permite
      if (tecla == 8) {
        document.getElementById("saldonuevo").value = document.getElementById("monto").value.trim();
        return true;
      }

      // Patron de entrada, en este caso solo acepta numeros y letras
      patron = /[0-9.]/;
      tecla_final = String.fromCharCode(tecla);

      return patron.test(tecla_final);
    }

    function guardacliente() {

      if (document.getElementById('mnombre').value == 0) {
        console.log("no hay cliente")
        document.getElementById('guardacliente').value = "NO";
        document.getElementById("nombre").focus();
        Swal.fire({
          icon: 'error',
          title: 'Cargue un cliente',
          text: ' ',
          showConfirmButton: false,
          timer: 1000
        }).then(function () {

        })
        return false;
      }
      else {
        document.getElementById('guardacliente').value = "SI";
        document.getElementById('id_cliente').value = "nuevo";
        document.getElementById('cliente').hidden = false
        document.getElementById('combo_cliente').hidden = true
        document.getElementById('cliente').value = document.getElementById('mnombre').value
        document.getElementById('nombre').value = document.getElementById('mnombre').value
        document.getElementById('calle').value = document.getElementById('mcalle').value
        document.getElementById('localidad').value = document.getElementById('mlocalidad').value
        document.getElementById('telefono').value = document.getElementById('mtelefono').value
        document.getElementById('iva').value = document.getElementById('tipo').value
        document.getElementById('cuit').value = document.getElementById('mcuit').value
        document.getElementById('mail').value = document.getElementById('mmail').value

      }

      $('#miModal').modal('hide');

    }

    function abremodal() {
      //document.getElementById("categoria").value = "2";
      //  $('#categoria').val('2');

      $('#miModal').modal('show');
    }

    document.getElementById("search").focus();
    $("input:text").focus(function () { $(this).select(); });

    function refresh() {
      console.log("entro en reFRESH")
      localStorage.clear();
      $("#lista_compra tbody tr").each(function (idx, fila) {
        infoProdu = {
          id: fila.children[0].firstElementChild.value,
          desc: fila.children[1].firstElementChild.value,
          cant: fila.children[2].firstElementChild.value,
          costo: fila.children[3].firstElementChild.value,
          costo_debito: fila.children[4].firstElementChild.value,
          subttl: fila.children[5].firstElementChild.value,
          subttl_deb: fila.children[6].firstElementChild.value

        };
        console.log("infoprodu", infoProdu)
        let productos = [];
        productos = obtenerProductosLocalStorage();
        productos.push(infoProdu);
        localStorage.setItem('productos', JSON.stringify(productos));
        //document.getElementById('items').value = productos.length;
      });
      console.log("tipode venta", tipodeventa)

      switch (tipodeventa) {
        case "REMITO":
          window.location = "/productoremito";
          break;
        case "Particular":
          window.location = "/productoventa";
          break;
        case "Comercio":
          window.location = "/productoventamayor";
          break;
      }

    }

    function obtenerProductosLocalStorage() {
      console.log('obtener producto local stotorage');
      let productoLS;
      //Comprobar si hay algo en LS
      if (localStorage.getItem('productos') === null) {
        console.log('no tiene');
        productoLS = [];
      }
      else {
        console.log('tiene');
        console.dir(localStorage.getItem('productos'));
        productoLS = JSON.parse(localStorage.getItem('productos'));

      }
      return productoLS;
    }


    function calculoTotal() {
      total = 0;
      mtotal_debito = 0;
      mlargo = 0;
      $("#lista_compra tbody tr").each(function (idx, fila) {
        total = total + parseFloat(fila.children[5].firstElementChild.value);
        mtotal_debito = mtotal_debito + parseFloat(fila.children[6].firstElementChild.value);
        mlargo = mlargo + 1;
      });
      field = document.querySelector('#total');
      field.value = total;
      $("#total_tabla").text(total);
      field = document.querySelector('#total_debito');
      field.value = mtotal_debito;
      $("#total_debito").text(mtotal_debito);
      field = document.querySelector('#total_lista');
      field.value = mtotal_debito;
      $("#total_lista").text(mtotal_debito);
      $("#item_tabla").text(mlargo);
      console.log("total ", total);
      field = document.querySelector('#largo');
      field.value = mlargo;
    }



  </script>
  <!-- Modal -->
  <div class="modal fade" id="miModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Carga de Cliente</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <table style="height: 500px; font-size: 2rem;width=1500px">
            <tbody>
              <tr>
                <td>Nombre</td>
                <td>
                  <input style="width:300px;height: 70px;" type="text" name="mnombre" id="mnombre" autocomplete="off" />
                </td>
              </tr>
              <tr>
                <td>Calle y Nro</td>
                <td><input style="width:300px;height: 70px;" type="text" name="mcalle" id="mcalle" autocomplete="off" />
                </td>
              </tr>
              <tr>
                <td>Localidad</td>
                <td><input style="width:300px;height: 70px;" type="text" name="mlocalidad" id="mlocalidad" /></td>
              </tr>
              <tr>
                <td>Telefono</td>
                <td><input style="width:300px;height: 70px;" type="text" name="mtelefono" id="mtelefono"
                    autocomplete="off" onkeypress="return check(event)" /></td>
              </tr>
              <td style="height: 20px;font-size: 2rem;width: 200px;  text-align: left;">
                <label type="text">Tipo de Iva</label>
              </td>
              <td style="height: 20px;font-size: 2rem;width: 250px;  text-align: right;">
                <select id="tipo" value="{{tipo}}">
                  <option selected value={{tipo}}>{{tipo}}</option>
                  <option value="Monotributista">Monotributista</option>
                  <option value="Inscripto">Responsable Inscripto</option>
                  <option value="No Inscripto">Responsable No Inscripto</option>
                  <option value="Exento">Exento</option>
                  <option value="No Sabe">No Sabe</option>
                </select>
                <input style="font-size: 2rem;width: 70px;  text-align: left;" name="miva" id="miva" readonly hidden>
              </td>
              <tr>
                <td>CUIT N°</td>
                <td><input style="width:300px;height: 70px;" type="text" name="mcuit" id="mcuit" autocomplete="off"
                    onkeypress="return check(event)" /></td>
              </tr>
              <tr>
                <td>Mail</td>
                <td><input style="width:300px;height: 70px;" type="email" name="mmail" id="mmail" autocomplete="off" />
                </td>
              </tr>
              <tr>
                <td>Categoria</td>
                <td>
                  {{#if comercio }}

                  <input style="width:300px;height: 70px;" type="text" name="mcategoria" id="mcategoria" value="2"
                    readonly />

                  {{else}}
                  <input style="width:300px;height: 70px;" type="text" name="mcategoria" id="mcategoria" value="1"
                    readonly />
                  {{/if}}
                </td>

              </tr>
              <tr style="height: 100px;">
                <td> <a></a> </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>

          <input style="width:120px; height: 50px;  font-size: 2rem;" type="button" class="btn btn-primary"
            onclick=guardacliente() value="Aceptar"></input>
        </div>
      </div>
    </div>
  </div>


</body>
<footer class="oculto-impresion"></footer>

<!--
<html>

<head>
  <title>modal</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

</head>
-->