<header>
  <link rel="stylesheet" href="/css/verventas.css">
</header>
<body>
  <form id="imprimircobro" action="/imprimircobro" method="post" style="font-size:24px">
  

    <div class="row">
      <div class="col-sm-5 col-md-6">
        <!--<div class="container mt-3 " style="width:300px;" align="left">-->

        <table border=0 align="center">
          <tr>
            <td style="width:300px;  align-items: center; text-align: center;">
              <input style="width:300px;height: 70px;font-size: 2rem;" type="text" name="search" id="search"
                class="form-control" placeholder="buscar" />
            </td>

            </td>
          </tr>
        </table>
        <div class="d-flex  justify-content-center">
          <div class="col-md-12 mx-auto">
         
              <table border="1">
                <tr style="font-size: 1em; font-weight: bold; background-color: blue; color: white;">
                    <td style="width: 107px;">Fecha</td>
                    <td style="width: 80px;">Hora</td>
                    <td style="width: 100px;">Numero</td>
                    <td style="width: 250px;">Cliente</td>
                    <td style="width: 100px;">Vendedor</td>
                    <td style="width: 150px;">Tipo</td>
                    <td style="width: 130px;">Total</td>
                    <td style="width: 60px;"></td>
                  </tr>
              </table>
            <div class="listaProductos">
              <table class="mi_table" id="tabla"> <!-- table table-striped table-bordered table-hover header-fixed -->
              
                <tbody>

                  {{#each cobros}}
                  <tr style="color:black;font-size:70%;">
                    <td style="width: 107px;text-align:right;">{{fecha}}</td>
                    <td style="width: 80px;text-align:right;">&nbsp&nbsp{{Hora}}</td>
                    <td style="width: 100px;text-align:right;">&nbsp&nbsp{{id_cobro}}</td>
                    <td style="width: 250px;text-align:left;">&nbsp&nbsp{{cliente}}</td>
                    <td style="width: 100px;text-align:left;"hidden>&nbsp&nbsp{{tipoventa}}</td>
                    <td style="width: 100px;text-align:left;">&nbsp&nbsp{{vendedor}}</td>
                    <td style="width: 150px;text-align:left;">&nbsp&nbsp{{tipo}}</td>
                    <td style="width: 130px;text-align:right;">$&nbsp&nbsp{{total}}</td>
                    <td style="text-align:left;" hidden >{{caja}}</td>
                    <td style="text-align:center; ">
                      <button style="width: 50px;background-color:green;color:white; " class="verfactura" type="button"
                        id="{{id_cobro}}" value="{{id_cobro}}">V</button>
                    </td>
                    <input id="fecha_{{id_cobro}}" value="{{fecha}}" hidden> </input>
                    <input id="hora_{{id_cobro}}" value="{{Hora}}" hidden> </input>
                    <input id="cliente_{{id_cobro}}" value="{{cliente}}" hidden> </input>
                    <input id="vendedor_{{id_cobro}}" value="{{vendedor}}" hidden> </input>
                    <input id="tipoventa_{{id_cobro}}" value="{{tipoventa}}" hidden> </input>
                    <input id="total_{{id_cobro}}" value="{{total}}" hidden> </input>
                    <input id="condicion_{{id_cobro}}" value="{{caja}}" hidden> </input>
                    <input id="saldoant_{{id_cobro}}" value="{{saldoant}}" hidden> </input>
                    <input id="trans_{{id_cobro}}" value="{{trans}}" hidden> </input>
                  </tr>
                  {{/each}}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-5 col-md-6">
        <table border="0" style="height: 140px; font-size: 2rem; width: 1000px;">
          <tr>
            <td>
              <label type="text">vendedor</label>
             <input type="text" name="combo_prov" id="combo_prov"  class="form-control"
              style="height: 70px;font-size: 2rem; text-align: left;"  />
            </td>
            <td style="height: 20px;font-size: 2rem;width: 100px;  text-align: center;">
              <label type="text">t-venta</label>
              <input class="form-control" style="height: 70px;font-size: 2rem;  font-weight: bold;"
                type="text" name="tipodeventa" id="tipodeventa" class="form-control" readonly></input>
            </td>  
            <td style="height: 20px;font-size: 2rem;width: 170px;  text-align: center;">
               <label type="text">Pago</label>
               <input class="form-control" style="height: 70px;font-size: 2rem;  font-weight: bold;"
                type="text" name="condicion" id="condicion" class="form-control" readonly></input>
            </td>
             <td style="height: 20px;font-size: 2rem;width: 170px;  text-align: center;">
               <input class="form-control" style="height: 70px;font-size: 2rem;  font-weight: bold;"
                type="text" name="cliente_saldo" id="cliente_saldo" class="form-control" hidden></input>
            </td>
          </tr>
          <tr>
            <td style="height: 20px;font-size: 2rem;width: 170px;  text-align: left;">
              <label type="text">Fecha</label>
              <input style="font-size: 2rem;width: 130px;  text-align: left;" name="fecha" id="fecha" readonly>
            </td>
            <td style="height: 20px;font-size: 2rem;width: 110px;  text-align: left;">
              <label type="text">Hora</label>
              <input style="font-size: 2rem;width: 80px;  text-align: left;" name="hora" id="hora" readonly>
            </td>
            <td style="height: 20px;font-size: 2rem;width: 130px;  text-align: left;">
              <label type="text">Numero </label>
              <input style="font-size: 2rem;width: 80px;  text-align: left;" name="cobro" id="cobro" readonly>
            </td>
            <td style="height: 20px;font-size: 2rem;width: 180px;  text-align: left;">
              <label type="text">Cliente</label>
              <input style="font-size: 2rem;width: 300px;  text-align: left;" name="cliente" id="cliente" readonly>
            </td>
        </table>


        <form>
          <div class="d-flex  justify-content-center">
            <div class="col-md-12 mx-auto">
              <div class="listaProductos">
                <!--  id="lista_compra" -->
                <table border="1" id="lista_compra" class="table table-striped table-bordered table-hover"
                  name="lista_compra">
                  <thead>
                    <tr style="color:black;font-size:80%;">
                      <th>Numero</th>
                      <th>Descripcion</th>
                      <th>Cant</th>
                      <th>Precio Unitario</th>
                      <th>Subttl</th>
                    </tr>
                  </thead>

                </table>

              </div>
            </div>
          </div>

        </form>
      </div>

    </div>
  </form>

  <div class="overlay"></div> <!-- si sacoesto deja de andar el scrip -->

  <script type="text/javascript">


    $('#search').keyup(function () {
      search_table($(this).val());
    });

    function search_table(value) {
      console.log("pasa")
      $('#tabla tr').each(function () {
        var found = 'false';

        $(this).each(function () {
          if ($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0) {
            found = 'true';
          }
        });

        if (found == 'true') {
          $(this).show();
        }
        else {
          $(this).hide();
        }

      });
    }



    $('.verfactura').on('click', function (e) {
      console.log('vercobro');
      console.log(e.target);
      var id = (e.target.value);
      console.log("id :", id);
      document.getElementById("cobro").value = id
      document.getElementById("fecha").value = $("#fecha_" + id).val()
      document.getElementById("hora").value = $("#hora_" + id).val()
      document.getElementById("cliente").value = $("#cliente_" + id).val()
      console.log("vendedor", $("#vendedor_" + id).val())
      document.getElementById("combo_prov").value = $("#vendedor_" + id).val()
      document.getElementById("tipodeventa").value = $("#tipoventa_" + id).val()
      document.getElementById("condicion").value = $("#condicion_" + id).val()
      //document.getElementById("total").value = $("#total_" + id).val()
      //document.getElementById("cliente_saldo").value = $("#saldoant_" + id).val()
      //document.getElementById("trans").value = $("#trans_" + id).val()
      document.getElementById("imprimircobro").submit();

      });

  </script>

</body>
<footer class="oculto-impresion"></footer>